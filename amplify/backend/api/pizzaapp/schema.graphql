# This "input" configures a global authorization rule to enable public access to
# all models in this schema. Learn more about authorization rules here: https://docs.amplify.aws/cli/graphql/authorization-rules
input AMPLIFY { globalAuthRule: AuthRule = { allow: public } } # FOR TESTING ONLY!

type PizzaApp
  @model(queries: null, mutations: null, subscriptions: null, timestamps: null)  {
  
  PK: String! @primaryKey(sortKeyFields: ["SK"])
  SK: String!
  TTL: AWSTimestamp
}

""" TYPES """

type Order {
  id: ID!
  user_id: String!
  customPizzas: [CustomPizza]!
  specialtyPizzas: [SpecialityPizza]!
  name: String!
  timestamp: String!
  subtotal: Int!
  tax: Int!
  total: Int!
}

type CustomPizza {
  id: ID!
  size: PizzaSize!
  crust: PizzaCrust!
  sauce: PizzaSauce!
  cheese: PizzaCheese!
  meats: [PizzaMeat]!
  veggies: [PizzaVeggie]!
  price: Int!
}

type SpecialityPizza {
  id: ID!
  size: PizzaSize!
  crust: PizzaCrust!
  sauce: PizzaSauce!
  cheese: PizzaCheese!
  meats: [PizzaMeat]!
  veggies: [PizzaVeggie]!
  price: Int!
}

enum PizzaVeggie {
  MUSHROOMS
  ONIONS
  GREEN_PEPPERS
  BLACK_OLIVES
  TOMATOES
  PINEAPPLE
  JALAPENOS
  NONE
}

enum PizzaMeat {
  PEPPERONI
  SAUSAGE
  BEEF
  HAM
  BACON
  CHICKEN
  NONE
}

type PizzaCheese {
  quantity: CheeseQuantity!
  additional: AdditionCheeseType
}

enum AdditionCheeseType {
  THREE_CHEESE
  EXTRA_CHEESE
  PARMESAN
  FETA
  CHEDDAR
  NONE
}

enum CheeseQuantity {
  NORMAL
  LIGHT
  NONE
}

enum PizzaSize {
  SMALL
  MEDIUM
  LARGE
}

enum PizzaCrust {
  ORIGINAL
  DEEP_DISH
  THIN
  STUFFED
  NEW_YORK
}

enum PizzaSauce {
  TOMATO
  ALFREDO
  PESTO
  BBQ
  GARLIC
  NONE
}

""" INPUTS """

input ListOrdersByUserInput {
  user_id: String!
}

type Query {

  """ORDERS"""
  listOrdersByUser(input: ListOrdersByUserInput!): [Order]
}